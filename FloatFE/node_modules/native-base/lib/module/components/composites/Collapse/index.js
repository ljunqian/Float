var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _lodash=_interopRequireDefault(require("lodash.isnil"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _primitives=require("../../primitives");var _this=this,_jsxFileName="/Users/himanshusatija/projects/nativebase-v3/src/components/composites/Collapse/index.tsx";function usePrevious(value){var ref=(0,_react.useRef)();function updatePrevious(newVal){ref.current=newVal;}(0,_react.useEffect)(function(){updatePrevious(value);},[value]);return{value:ref.current,updatePrevious:updatePrevious};}var Collapse=function Collapse(_ref,ref){var endingHeight=_ref.endingHeight,startingHeight=_ref.startingHeight,duration=_ref.duration,isOpen=_ref.isOpen,onAnimationEnd=_ref.onAnimationEnd,onAnimationStart=_ref.onAnimationStart,props=(0,_objectWithoutProperties2.default)(_ref,["endingHeight","startingHeight","duration","isOpen","onAnimationEnd","onAnimationStart"]);if(_reactNative.Platform.OS==='android'){_reactNative.UIManager.setLayoutAnimationEnabledExperimental&&_reactNative.UIManager.setLayoutAnimationEnabledExperimental(true);}var CustomLayoutLinear={duration:duration?duration:400,create:{type:_reactNative.LayoutAnimation.Types.easeInEaseOut,property:_reactNative.LayoutAnimation.Properties.opacity},update:{type:_reactNative.LayoutAnimation.Types.easeInEaseOut}};var defaultStartHeight=isOpen?endingHeight:startingHeight?startingHeight:1;var animatedStyle={height:defaultStartHeight};var animateView=function animateView(){if(onAnimationStart){onAnimationStart();}animatedStyle={height:isOpen?endingHeight:defaultStartHeight};var callback=onAnimationEnd?onAnimationEnd:function(){};_reactNative.LayoutAnimation.configureNext(CustomLayoutLinear,callback());};var wasOpen=usePrevious(isOpen);if(!(0,_lodash.default)(wasOpen.value)&&wasOpen.value!==isOpen){animateView();wasOpen.updatePrevious(isOpen);}var _React$useState=_react.default.useState(startingHeight!=null?startingHeight:0),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),size=_React$useState2[0],setSize=_React$useState2[1];var provideSize=function provideSize(layoutSize){setSize(layoutSize.height);};var _web={transition:"height "+(duration!=null?duration:'400')+"ms",height:isOpen?endingHeight||size:startingHeight||0};return _react.default.createElement(_primitives.Box,{style:(0,_extends2.default)({},animatedStyle,_reactNative.Platform.OS==='web'&&_web),overflow:"hidden",ref:ref,__self:_this,__source:{fileName:_jsxFileName,lineNumber:87,columnNumber:5}},_react.default.createElement(_primitives.Box,(0,_extends2.default)({overflow:_reactNative.Platform.OS==='web'?'auto':'scroll',onLayout:function onLayout(e){return provideSize(e.nativeEvent.layout);}},props,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:92,columnNumber:7}})));};var _default=_react.default.memo((0,_react.forwardRef)(Collapse));exports.default=_default;
//# sourceMappingURL=index.js.map
{"version":3,"sources":["Tooltip.tsx"],"names":["Tooltip","label","children","onClose","onOpen","defaultIsOpen","placement","openDelay","closeDelay","closeOnClick","offset","isDisabled","hasArrow","arrowSize","isOpenProp","isOpen","rest","undefined","themeProps","value","defaultValue","onChange","setIsOpen","arrowBg","backgroundColor","bgColor","bg","targetRef","React","useRef","enterTimeout","exitTimeout","tooltipID","openWithDelay","useCallback","current","setTimeout","closeWithDelay","clearTimeout","useEffect","newChildren","cloneElement","props","onPress","onFocus","onBlur","onMouseEnter","onMouseLeave","ref","enabled","callback","opacity","transition","duration","StyleSheet","absoluteFill","Platform","OS"],"mappings":"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","sourcesContent":["import { OverlayContainer } from '@react-native-aria/overlays';\nimport React from 'react';\nimport { useControllableState, useKeyboardDismissable } from '../../../hooks';\nimport { Popper } from '../Popper';\nimport { composeEventHandlers, mergeRefs } from '../../../utils';\nimport { PresenceTransition } from '../Transitions';\nimport { Platform, StyleSheet } from 'react-native';\nimport { usePropsResolution } from '../../../hooks';\nimport Box, { IBoxProps } from '../../primitives/Box';\nimport { useId } from '@react-aria/utils';\n\ninterface ITooltipProps extends IBoxProps {\n  /**\n   * Text to be placed in the tooltip\n   */\n  label: string;\n  /**\n   * Whether the tooltip is opened. Useful for conrolling the open state\n   */\n  isOpen?: boolean;\n  /**\n   * Whether the tooltip is disabled\n   */\n  isDisabled?: boolean;\n  /**\n   * If true, the popover will be opened by default\n   */\n  defaultIsOpen?: boolean;\n  /**\n   * This function will be invoked when tooltip is closed. It'll also be called when user attempts to close the tooltip via Escape key\n   */\n  onClose?: () => void;\n  /**\n   * This function will be invoked when tooltip is opened\n   */\n  onOpen?: () => void;\n  /**\n   * Duration in ms to wait till displaying the tooltip\n   * @default 0\n   */\n  openDelay?: number;\n  /**\n   * Duration in ms to wait till hiding the tooltip\n   * @default 0\n   */\n  closeDelay?: number;\n  /**\n   * Tooltip placement\n   * @default bottom\n   */\n  placement?:\n    | 'top'\n    | 'bottom'\n    | 'left'\n    | 'right'\n    | 'top left'\n    | 'top right'\n    | 'bottom left'\n    | 'bottom right'\n    | 'right top'\n    | 'right bottom'\n    | 'left top'\n    | 'left bottom';\n  /**\n   * Children passed will be used as Trigger element for the tooltip\n   */\n  children: any;\n  /**\n   * Whether tooltip should be closed on Trigger click\n   * @default true\n   */\n  closeOnClick?: boolean;\n  /**\n   * Size of the arrow\n   * @default 12\n   */\n  arrowSize?: number;\n  /**\n   * Whether tooltip should display arrow\n   * @default false\n   */\n  hasArrow?: boolean;\n  /**\n   * Distance between the trigger and the tooltip\n   */\n  offset?: number;\n}\n\nexport const Tooltip = ({\n  label,\n  children,\n  onClose,\n  onOpen,\n  defaultIsOpen,\n  placement,\n  openDelay = 0,\n  closeDelay = 0,\n  closeOnClick = true,\n  offset,\n  isDisabled,\n  hasArrow,\n  arrowSize = 12,\n  isOpen: isOpenProp,\n  ...rest\n}: ITooltipProps) => {\n  if (hasArrow && offset === undefined) {\n    offset = 0;\n  } else {\n    offset = 6;\n  }\n\n  const themeProps = usePropsResolution('Tooltip', rest);\n  const [isOpen, setIsOpen] = useControllableState({\n    value: isOpenProp,\n    defaultValue: defaultIsOpen,\n    onChange: (value) => {\n      value ? onOpen && onOpen() : onClose && onClose();\n    },\n  });\n\n  const arrowBg =\n    rest.backgroundColor ?? rest.bgColor ?? rest.bg ?? themeProps.bg;\n\n  const targetRef = React.useRef(null);\n\n  const enterTimeout = React.useRef<number>();\n  const exitTimeout = React.useRef<number>();\n  const tooltipID = useId();\n\n  const openWithDelay = React.useCallback(() => {\n    if (!isDisabled) {\n      enterTimeout.current = setTimeout(() => setIsOpen(true), openDelay);\n    }\n  }, [isDisabled, setIsOpen, openDelay]);\n\n  const closeWithDelay = React.useCallback(() => {\n    if (enterTimeout.current) {\n      clearTimeout(enterTimeout.current);\n    }\n    exitTimeout.current = setTimeout(() => setIsOpen(false), closeDelay);\n  }, [closeDelay, setIsOpen]);\n\n  React.useEffect(\n    () => () => {\n      clearTimeout(enterTimeout.current);\n      clearTimeout(exitTimeout.current);\n    },\n    []\n  );\n\n  let newChildren = children;\n\n  if (typeof children === 'string') {\n    newChildren = <Box>{children}</Box>;\n  }\n\n  newChildren = React.cloneElement(newChildren, {\n    'onPress': composeEventHandlers<any>(newChildren.props.onPress, () => {\n      if (closeOnClick) {\n        closeWithDelay();\n      }\n    }),\n    'onFocus': composeEventHandlers<any>(\n      newChildren.props.onFocus,\n      openWithDelay\n    ),\n    'onBlur': composeEventHandlers<any>(\n      newChildren.props.onBlur,\n      closeWithDelay\n    ),\n    'onMouseEnter': composeEventHandlers<any>(\n      newChildren.props.onMouseEnter,\n      openWithDelay\n    ),\n    'onMouseLeave': composeEventHandlers<any>(\n      newChildren.props.onMouseLeave,\n      closeWithDelay\n    ),\n    'ref': mergeRefs([newChildren.ref, targetRef]),\n\n    'aria-describedby': isOpen ? tooltipID : undefined,\n  });\n\n  useKeyboardDismissable({\n    enabled: isOpen,\n    callback: () => setIsOpen(false),\n  });\n\n  return (\n    <>\n      {newChildren}\n      {isOpen && (\n        <OverlayContainer>\n          <PresenceTransition\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1, transition: { duration: 150 } }}\n            exit={{ opacity: 0, transition: { duration: 100 } }}\n            visible={isOpen}\n            style={StyleSheet.absoluteFill}\n          >\n            <Popper\n              triggerRef={targetRef}\n              onClose={() => setIsOpen(false)}\n              placement={placement}\n              offset={offset}\n            >\n              <Popper.Content>\n                {hasArrow && (\n                  <Popper.Arrow\n                    borderColor=\"transparent\"\n                    backgroundColor={arrowBg}\n                    height={arrowSize}\n                    width={arrowSize}\n                  />\n                )}\n                <Box\n                  {...themeProps}\n                  //@ts-ignore\n                  accessibilityRole={\n                    Platform.OS === 'web' ? 'tooltip' : undefined\n                  }\n                  nativeID={tooltipID}\n                >\n                  {label}\n                </Box>\n              </Popper.Content>\n            </Popper>\n          </PresenceTransition>\n        </OverlayContainer>\n      )}\n    </>\n  );\n};\n"]}
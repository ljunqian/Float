var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _Backdrop=_interopRequireDefault(require("../Backdrop"));var _Transitions=require("../Transitions");var _focus=require("@react-native-aria/focus");var _hooks=require("../../../hooks");var _Context=require("./Context");var _Box=_interopRequireDefault(require("../../primitives/Box"));var _Transitions2=require("../../composites/Transitions");var _utils=require("../../../utils");var _Overlay=require("../../primitives/Overlay");var _this=this,_jsxFileName="/Users/himanshusatija/projects/nativebase-v3/src/components/composites/Modal/Modal.tsx";var Modal=function Modal(_ref,ref){var children=_ref.children,isOpen=_ref.isOpen,onClose=_ref.onClose,defaultIsOpen=_ref.defaultIsOpen,initialFocusRef=_ref.initialFocusRef,finalFocusRef=_ref.finalFocusRef,avoidKeyboard=_ref.avoidKeyboard,_ref$closeOnOverlayCl=_ref.closeOnOverlayClick,closeOnOverlayClick=_ref$closeOnOverlayCl===void 0?true:_ref$closeOnOverlayCl,_ref$isKeyboardDismis=_ref.isKeyboardDismissable,isKeyboardDismissable=_ref$isKeyboardDismis===void 0?true:_ref$isKeyboardDismis,_ref$overlayVisible=_ref.overlayVisible,overlayVisible=_ref$overlayVisible===void 0?true:_ref$overlayVisible,_ref$backdropVisible=_ref.backdropVisible,backdropVisible=_ref$backdropVisible===void 0?true:_ref$backdropVisible,_ref$animationPreset=_ref.animationPreset,animationPreset=_ref$animationPreset===void 0?'fade':_ref$animationPreset,rest=(0,_objectWithoutProperties2.default)(_ref,["children","isOpen","onClose","defaultIsOpen","initialFocusRef","finalFocusRef","avoidKeyboard","closeOnOverlayClick","isKeyboardDismissable","overlayVisible","backdropVisible","animationPreset"]);var bottomInset=(0,_utils.useKeyboardBottomInset)();var _usePropsResolution=(0,_hooks.usePropsResolution)('Modal',rest),contentSize=_usePropsResolution.contentSize,_backdrop=_usePropsResolution._backdrop,restThemeProps=(0,_objectWithoutProperties2.default)(_usePropsResolution,["contentSize","_backdrop"]);var _useControllableState=(0,_hooks.useControllableState)({value:isOpen,defaultValue:defaultIsOpen,onChange:function onChange(val){if(!val)onClose&&onClose();}}),_useControllableState2=(0,_slicedToArray2.default)(_useControllableState,2),visible=_useControllableState2[0],setVisible=_useControllableState2[1];var handleClose=function handleClose(){return setVisible(false);};var child=_react.default.createElement(_Box.default,(0,_extends2.default)({bottom:avoidKeyboard?bottomInset+'px':undefined},restThemeProps,{ref:ref,pointerEvents:"box-none",__self:_this,__source:{fileName:_jsxFileName,lineNumber:50,columnNumber:5}}),children);return _react.default.createElement(_Overlay.Overlay,{isOpen:visible,onRequestClose:handleClose,isKeyboardDismissable:isKeyboardDismissable,useRNModalOnAndroid:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:61,columnNumber:5}},_react.default.createElement(_Context.ModalContext.Provider,{value:{handleClose:handleClose,contentSize:contentSize,initialFocusRef:initialFocusRef,finalFocusRef:finalFocusRef},__self:_this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:7}},_react.default.createElement(_Transitions2.Fade,{exitDuration:150,entryDuration:200,in:visible,style:_reactNative.StyleSheet.absoluteFill,__self:_this,__source:{fileName:_jsxFileName,lineNumber:75,columnNumber:9}},overlayVisible&&backdropVisible&&_react.default.createElement(_Backdrop.default,(0,_extends2.default)({onPress:function onPress(){closeOnOverlayClick&&handleClose();}},_backdrop,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:82,columnNumber:13}}))),animationPreset==='slide'?_react.default.createElement(_Transitions.Slide,{in:visible,duration:200,__self:_this,__source:{fileName:_jsxFileName,lineNumber:91,columnNumber:11}},_react.default.createElement(_focus.FocusScope,{contain:visible,autoFocus:visible&&!initialFocusRef,restoreFocus:visible&&!finalFocusRef,__self:_this,__source:{fileName:_jsxFileName,lineNumber:92,columnNumber:13}},child)):_react.default.createElement(_Transitions2.Fade,{exitDuration:100,entryDuration:200,in:visible,style:_reactNative.StyleSheet.absoluteFill,__self:_this,__source:{fileName:_jsxFileName,lineNumber:101,columnNumber:11}},_react.default.createElement(_focus.FocusScope,{contain:visible,autoFocus:visible&&!initialFocusRef,restoreFocus:visible&&!finalFocusRef,__self:_this,__source:{fileName:_jsxFileName,lineNumber:107,columnNumber:13}},child))));};var _default=(0,_react.memo)((0,_react.forwardRef)(Modal));exports.default=_default;
//# sourceMappingURL=Modal.js.map
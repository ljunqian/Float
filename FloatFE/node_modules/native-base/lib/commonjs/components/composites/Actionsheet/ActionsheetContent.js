var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireWildcard(require("react"));var _Modal=require("../../composites/Modal");var _hooks=require("../../../hooks");var _reactNative=require("react-native");var _Context=require("../Modal/Context");var _Box=_interopRequireDefault(require("../../primitives/Box"));var _ActionSheetContext=require("./ActionSheetContext");var _this=this,_jsxFileName="/Users/himanshusatija/projects/nativebase-v3/src/components/composites/Actionsheet/ActionsheetContent.tsx";var ActionsheetContent=function ActionsheetContent(_ref,ref){var children=_ref.children,props=(0,_objectWithoutProperties2.default)(_ref,["children"]);var _usePropsResolution=(0,_hooks.usePropsResolution)('ActionsheetContent',props),_dragIndicator=_usePropsResolution._dragIndicator,newProps=(0,_objectWithoutProperties2.default)(_usePropsResolution,["_dragIndicator"]);var _React$useContext=_react.default.useContext(_Context.ModalContext),handleClose=_React$useContext.handleClose;var _React$useContext2=_react.default.useContext(_ActionSheetContext.ActionSheetContext),hideDragIndicator=_React$useContext2.hideDragIndicator;var pan=_react.default.useRef(new _reactNative.Animated.ValueXY()).current;var sheetHeight=_react.default.useRef(0);var panResponder=_react.default.useRef(_reactNative.PanResponder.create({onStartShouldSetPanResponder:function onStartShouldSetPanResponder(){return true;},onMoveShouldSetPanResponder:function onMoveShouldSetPanResponder(_evt,gestureState){return gestureState.dy>15;},onPanResponderMove:function onPanResponderMove(e,gestureState){if(gestureState.dy>0){_reactNative.Animated.event([null,{dy:pan.y}],{useNativeDriver:false})(e,gestureState);}},onPanResponderRelease:function onPanResponderRelease(_e,gestureState){if(sheetHeight.current/4-gestureState.dy<0){_reactNative.Animated.timing(pan,{toValue:{x:0,y:sheetHeight.current},duration:150,useNativeDriver:true}).start(handleClose);}else{_reactNative.Animated.spring(pan,{toValue:{x:0,y:0},overshootClamping:true,useNativeDriver:true}).start();}}})).current;return _react.default.createElement(_reactNative.Animated.View,{style:{transform:[{translateY:pan.y}],width:'100%'},onLayout:function onLayout(event){var height=event.nativeEvent.layout.height;sheetHeight.current=height;},pointerEvents:"box-none",__self:_this,__source:{fileName:_jsxFileName,lineNumber:56,columnNumber:5}},!hideDragIndicator?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_Box.default,(0,_extends2.default)({py:5},panResponder.panHandlers,{collapsable:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:70,columnNumber:11}}))):null,_react.default.createElement(_Modal.Modal.Content,(0,_extends2.default)({},newProps,{ref:ref,safeAreaBottom:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:74,columnNumber:7}}),!hideDragIndicator?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_Box.default,(0,_extends2.default)({py:5,mt:-2},panResponder.panHandlers,{width:"100%",alignItems:"center",collapsable:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:78,columnNumber:13}}),_react.default.createElement(_Box.default,(0,_extends2.default)({},_dragIndicator,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:86,columnNumber:15}})))):null,children));};var _default=(0,_react.memo)((0,_react.forwardRef)(ActionsheetContent));exports.default=_default;
//# sourceMappingURL=ActionsheetContent.js.map
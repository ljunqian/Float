var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.Tooltip=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _overlays=require("@react-native-aria/overlays");var _react=_interopRequireDefault(require("react"));var _hooks=require("../../../hooks");var _Popper=require("../Popper");var _utils=require("../../../utils");var _Transitions=require("../Transitions");var _reactNative=require("react-native");var _Box=_interopRequireDefault(require("../../primitives/Box"));var _utils2=require("@react-aria/utils");var _this=this,_jsxFileName="/Users/himanshusatija/projects/nativebase-v3/src/components/composites/Tooltip/Tooltip.tsx";var Tooltip=function Tooltip(_ref){var _ref2,_ref3,_rest$backgroundColor;var label=_ref.label,children=_ref.children,onClose=_ref.onClose,onOpen=_ref.onOpen,defaultIsOpen=_ref.defaultIsOpen,placement=_ref.placement,_ref$openDelay=_ref.openDelay,openDelay=_ref$openDelay===void 0?0:_ref$openDelay,_ref$closeDelay=_ref.closeDelay,closeDelay=_ref$closeDelay===void 0?0:_ref$closeDelay,_ref$closeOnClick=_ref.closeOnClick,closeOnClick=_ref$closeOnClick===void 0?true:_ref$closeOnClick,offset=_ref.offset,isDisabled=_ref.isDisabled,hasArrow=_ref.hasArrow,_ref$arrowSize=_ref.arrowSize,arrowSize=_ref$arrowSize===void 0?12:_ref$arrowSize,isOpenProp=_ref.isOpen,rest=(0,_objectWithoutProperties2.default)(_ref,["label","children","onClose","onOpen","defaultIsOpen","placement","openDelay","closeDelay","closeOnClick","offset","isDisabled","hasArrow","arrowSize","isOpen"]);if(hasArrow&&offset===undefined){offset=0;}else{offset=6;}var themeProps=(0,_hooks.usePropsResolution)('Tooltip',rest);var _useControllableState=(0,_hooks.useControllableState)({value:isOpenProp,defaultValue:defaultIsOpen,onChange:function onChange(value){value?onOpen&&onOpen():onClose&&onClose();}}),_useControllableState2=(0,_slicedToArray2.default)(_useControllableState,2),isOpen=_useControllableState2[0],setIsOpen=_useControllableState2[1];var arrowBg=(_ref2=(_ref3=(_rest$backgroundColor=rest.backgroundColor)!=null?_rest$backgroundColor:rest.bgColor)!=null?_ref3:rest.bg)!=null?_ref2:themeProps.bg;var targetRef=_react.default.useRef(null);var enterTimeout=_react.default.useRef();var exitTimeout=_react.default.useRef();var tooltipID=(0,_utils2.useId)();var openWithDelay=_react.default.useCallback(function(){if(!isDisabled){enterTimeout.current=setTimeout(function(){return setIsOpen(true);},openDelay);}},[isDisabled,setIsOpen,openDelay]);var closeWithDelay=_react.default.useCallback(function(){if(enterTimeout.current){clearTimeout(enterTimeout.current);}exitTimeout.current=setTimeout(function(){return setIsOpen(false);},closeDelay);},[closeDelay,setIsOpen]);_react.default.useEffect(function(){return function(){clearTimeout(enterTimeout.current);clearTimeout(exitTimeout.current);};},[]);var newChildren=children;if(typeof children==='string'){newChildren=_react.default.createElement(_Box.default,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:154,columnNumber:19}},children);}newChildren=_react.default.cloneElement(newChildren,{'onPress':(0,_utils.composeEventHandlers)(newChildren.props.onPress,function(){if(closeOnClick){closeWithDelay();}}),'onFocus':(0,_utils.composeEventHandlers)(newChildren.props.onFocus,openWithDelay),'onBlur':(0,_utils.composeEventHandlers)(newChildren.props.onBlur,closeWithDelay),'onMouseEnter':(0,_utils.composeEventHandlers)(newChildren.props.onMouseEnter,openWithDelay),'onMouseLeave':(0,_utils.composeEventHandlers)(newChildren.props.onMouseLeave,closeWithDelay),'ref':(0,_utils.mergeRefs)([newChildren.ref,targetRef]),'aria-describedby':isOpen?tooltipID:undefined});(0,_hooks.useKeyboardDismissable)({enabled:isOpen,callback:function callback(){return setIsOpen(false);}});return _react.default.createElement(_react.default.Fragment,null,newChildren,isOpen&&_react.default.createElement(_overlays.OverlayContainer,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:193,columnNumber:9}},_react.default.createElement(_Transitions.PresenceTransition,{initial:{opacity:0},animate:{opacity:1,transition:{duration:150}},exit:{opacity:0,transition:{duration:100}},visible:isOpen,style:_reactNative.StyleSheet.absoluteFill,__self:_this,__source:{fileName:_jsxFileName,lineNumber:194,columnNumber:11}},_react.default.createElement(_Popper.Popper,{triggerRef:targetRef,onClose:function onClose(){return setIsOpen(false);},placement:placement,offset:offset,__self:_this,__source:{fileName:_jsxFileName,lineNumber:201,columnNumber:13}},_react.default.createElement(_Popper.Popper.Content,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:207,columnNumber:15}},hasArrow&&_react.default.createElement(_Popper.Popper.Arrow,{borderColor:"transparent",backgroundColor:arrowBg,height:arrowSize,width:arrowSize,__self:_this,__source:{fileName:_jsxFileName,lineNumber:209,columnNumber:19}}),_react.default.createElement(_Box.default,(0,_extends2.default)({},themeProps,{accessibilityRole:_reactNative.Platform.OS==='web'?'tooltip':undefined,nativeID:tooltipID,__self:_this,__source:{fileName:_jsxFileName,lineNumber:216,columnNumber:17}}),label))))));};exports.Tooltip=Tooltip;
//# sourceMappingURL=Tooltip.js.map
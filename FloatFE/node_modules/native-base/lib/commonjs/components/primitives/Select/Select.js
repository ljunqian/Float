var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.SelectContext=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _Actionsheet=require("../../composites/Actionsheet");var _Box=_interopRequireDefault(require("../Box"));var _Input=require("../Input");var _focus=require("@react-native-aria/focus");var _hooks=require("../../../hooks");var _useThemeProps=require("../../../hooks/useThemeProps");var _interactions=require("@react-native-aria/interactions");var _utils=require("../../../utils");var _FormControl=require("../../composites/FormControl");var _utils2=require("../../../theme/tools/utils");var _Icons=require("../Icon/Icons");var _ScrollView=require("../../basic/ScrollView");var _this=this,_jsxFileName="/Users/himanshusatija/projects/nativebase-v3/src/components/primitives/Select/Select.tsx";var unstyledSelecWebtStyles={width:'100%',height:'100%',appearance:'none',WebkitAppearance:'none',MozAppearance:'none'};var SelectContext=_react.default.createContext({onValueChange:function(){},selectedValue:null,_selectedItem:{},_item:{}});exports.SelectContext=SelectContext;var Select=function Select(_ref2,ref){var onValueChange=_ref2.onValueChange,selectedValue=_ref2.selectedValue,children=_ref2.children,dropdownIcon=_ref2.dropdownIcon,dropdownCloseIcon=_ref2.dropdownCloseIcon,dropdownOpenIcon=_ref2.dropdownOpenIcon,placeholder=_ref2.placeholder,accessibilityLabel=_ref2.accessibilityLabel,defaultValue=_ref2.defaultValue,size=_ref2.size,_item=_ref2._item,_selectedItem=_ref2._selectedItem,wrapperRef=_ref2.wrapperRef,props=(0,_objectWithoutProperties2.default)(_ref2,["onValueChange","selectedValue","children","dropdownIcon","dropdownCloseIcon","dropdownOpenIcon","placeholder","accessibilityLabel","defaultValue","size","_item","_selectedItem","wrapperRef"]);var selectProps=(0,_FormControl.useFormControl)({isDisabled:props.isDisabled,nativeID:props.nativeID});var isDisabled=selectProps.disabled;var _ref=_react.default.useRef(null);var themeProps=(0,_useThemeProps.usePropsResolution)('Input',(0,_extends2.default)({},props,{size:size}));var _React$useState=_react.default.useState(false),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),isOpen=_React$useState2[0],setIsOpen=_React$useState2[1];var _useFocusRing=(0,_focus.useFocusRing)(),focusProps=_useFocusRing.focusProps,isFocusVisible=_useFocusRing.isFocusVisible;var _useHover=(0,_interactions.useHover)({isDisabled:isDisabled},_ref),hoverProps=_useHover.hoverProps,isHovered=_useHover.isHovered;var _useControllableState=(0,_hooks.useControllableState)({value:selectedValue,defaultValue:defaultValue,onChange:function onChange(newValue){onValueChange&&onValueChange(newValue);setIsOpen(false);}}),_useControllableState2=(0,_slicedToArray2.default)(_useControllableState,2),value=_useControllableState2[0],setValue=_useControllableState2[1];var itemsList=_react.default.Children.map(children,function(child){return{label:child.props.label,value:child.props.value};});var selectedItemArray=itemsList.filter(function(item){return item.value===value;});var selectedItem=selectedItemArray&&selectedItemArray.length?selectedItemArray[0]:null;var _usePropsResolution=(0,_useThemeProps.usePropsResolution)('Select',props),variant=_usePropsResolution.variant,customDropdownIconProps=_usePropsResolution.customDropdownIconProps,_actionSheetContent=_usePropsResolution._actionSheetContent,newProps=(0,_objectWithoutProperties2.default)(_usePropsResolution,["variant","customDropdownIconProps","_actionSheetContent"]);var _extractInObject=(0,_utils2.extractInObject)(newProps,(0,_toConsumableArray2.default)(_utils2.stylingProps.border)),_extractInObject2=(0,_slicedToArray2.default)(_extractInObject,2),borderProps=_extractInObject2[0],remainingProps=_extractInObject2[1];var _extractInObject3=(0,_utils2.extractInObject)(remainingProps,[].concat((0,_toConsumableArray2.default)(_utils2.stylingProps.margin),(0,_toConsumableArray2.default)(_utils2.stylingProps.layout),(0,_toConsumableArray2.default)(_utils2.stylingProps.flexbox),(0,_toConsumableArray2.default)(_utils2.stylingProps.position),(0,_toConsumableArray2.default)(_utils2.stylingProps.background))),_extractInObject4=(0,_slicedToArray2.default)(_extractInObject3,2),layoutProps=_extractInObject4[0],nonLayoutProps=_extractInObject4[1];var rightIcon=isOpen&&dropdownOpenIcon?dropdownOpenIcon:!isOpen&&dropdownCloseIcon?dropdownCloseIcon:dropdownIcon?dropdownIcon:_react.default.createElement(_Icons.ChevronDownIcon,(0,_extends2.default)({},customDropdownIconProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:116,columnNumber:7}}));var commonInput=_react.default.createElement(_Input.Input,(0,_extends2.default)({"aria-hidden":true,importantForAccessibility:"no",value:selectedItem==null?void 0:selectedItem.label,placeholder:placeholder,editable:false,focusable:false,size:size,variant:variant,InputRightElement:rightIcon},isHovered?themeProps._hover:{},nonLayoutProps,borderProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:120,columnNumber:5}}));var handleClose=function handleClose(){return setIsOpen(false);};return _react.default.createElement(_Box.default,(0,_extends2.default)({borderWidth:1,borderColor:"transparent"},layoutProps,{borderRadius:themeProps.borderRadius},isFocusVisible?themeProps._focus:{},{ref:wrapperRef,__self:_this,__source:{fileName:_jsxFileName,lineNumber:139,columnNumber:5}}),_reactNative.Platform.OS==='web'?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_Box.default,{w:"100%",h:"100%",position:"absolute",opacity:"0",zIndex:1,__self:_this,__source:{fileName:_jsxFileName,lineNumber:149,columnNumber:11}},_react.default.createElement("select",(0,_extends2.default)({},selectProps,{disabled:isDisabled},focusProps,hoverProps,{ref:(0,_utils.mergeRefs)([ref,_ref]),style:unstyledSelecWebtStyles,onChange:function onChange(e){setValue(e.target.value);},value:value,"aria-label":placeholder,__self:_this,__source:{fileName:_jsxFileName,lineNumber:150,columnNumber:13}}),children)),commonInput):_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_reactNative.Pressable,{onPress:function onPress(){return setIsOpen(true);},disabled:isDisabled,accessibilityLabel:accessibilityLabel,accessibilityRole:"button",ref:(0,_utils.mergeRefs)([ref,_ref]),__self:_this,__source:{fileName:_jsxFileName,lineNumber:171,columnNumber:11}},_react.default.createElement(_reactNative.View,{pointerEvents:"none",__self:_this,__source:{fileName:_jsxFileName,lineNumber:178,columnNumber:13}},commonInput)),_react.default.createElement(_Actionsheet.Actionsheet,{isOpen:isOpen,onClose:handleClose,__self:_this,__source:{fileName:_jsxFileName,lineNumber:180,columnNumber:11}},_react.default.createElement(_Actionsheet.Actionsheet.Content,(0,_extends2.default)({},_actionSheetContent,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:181,columnNumber:13}}),_react.default.createElement(_ScrollView.ScrollView,{width:"100%",__self:_this,__source:{fileName:_jsxFileName,lineNumber:182,columnNumber:15}},_react.default.createElement(SelectContext.Provider,{value:{onValueChange:setValue,selectedValue:value,_selectedItem:_selectedItem!=null?_selectedItem:{},_item:_item!=null?_item:{}},__self:_this,__source:{fileName:_jsxFileName,lineNumber:183,columnNumber:17}},children))))));};var _default=(0,_react.memo)((0,_react.forwardRef)(Select));exports.default=_default;
//# sourceMappingURL=Select.js.map